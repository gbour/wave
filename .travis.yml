language: erlang
otp_release:
    - 17.3
services:
    - redis-server
install:
    - make build
    - make cert
    # need to enable TLSv1 as python2.7 do not support TLS >= 1.1
    - sed -e "s/{versions, .*\}/{versions, ['tlsv1', 'tlsv1.1', 'tlsv1.2']}/g" etc/wave.config > etc/wave.config.tmp && mv etc/wave.config.tmp etc/wave.config
    - "git clone -b enhancement https://github.com/gbour/nyamuk.git tests/nyamuk"
script:
    - ./.travis-run.sh
notifications:
    email: "travis-wave@bour.cc"
